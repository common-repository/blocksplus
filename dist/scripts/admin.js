!function o(l,a,i){function u(t,e){if(!a[t]){if(!l[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(d)return d(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=a[t]={exports:{}},l[t][0].call(n.exports,function(e){return u(l[t][1][e]||e)},n,n.exports,o,l,a,i)}return a[t].exports}for(var d="function"==typeof require&&require,e=0;e<i.length;e++)u(i[e]);return u}({1:[function(e,t,n){"use strict";var o=c(e("./admin/loadWpColorPicker")),l=c(e("./admin/pluginAdminColorPalette")),a=c(e("./admin/pluginAdminFontSizes")),i=c(e("./admin/savePluginOptions")),u=c(e("./admin/pluginAdminDeleteRow")),d=c(e("./admin/optionAreaEnable")),r=c(e("./admin/setNoticeCookie"));function c(e){return e&&e.__esModule?e:{default:e}}document.addEventListener("DOMContentLoaded",function(){var e,t;(0,r.default)(),document.getElementById("blocksplus_admin")&&((0,o.default)(),(0,l.default)(),(0,a.default)(),(0,i.default)(),(0,u.default)(),e=document.querySelector('input[name="color_palette_enable"]'),t=document.getElementById("color_palette_area"),(0,d.default)(e,t),e=document.querySelector('input[name="font_sizes_enable"]'),t=document.getElementById("font_sizes_area"),(0,d.default)(e,t))})},{"./admin/loadWpColorPicker":4,"./admin/optionAreaEnable":5,"./admin/pluginAdminColorPalette":6,"./admin/pluginAdminDeleteRow":7,"./admin/pluginAdminFontSizes":8,"./admin/savePluginOptions":9,"./admin/setNoticeCookie":10}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=document.createElement("template");return e=e.trim(),t.innerHTML=e,t.content.firstChild}},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n,e=document.querySelectorAll("[name="+e+"]");return 0<e.length&&(e.forEach(function(e){t.test(e.value)||(n=!1)}),!1!==n)}},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){jQuery(document).ready(function(e){e(".blocksplus-color-palette").wpColorPicker()})}},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){e&&e.addEventListener("change",function(){!0!==e.checked?t.style.display="none":t.style.display="block"})}},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){document.getElementById("add_new_color_palette")&&document.getElementById("add_new_color_palette").addEventListener("click",function(){var e="id_"+Math.floor(100*Math.random()),e=(0,o.default)("<tr id="+e+'><th scope="row"><input name="color_palette_name" type="text" style="margin: 0 6px 6px 0"/></th><td><input name="color_palette_value" type="text" value="#fff" class="blocksplus-color-palette" data-default-color="#fff" /><button type="button" class="button button-primary button-row-delete" style="background: #dc3545; border: none;">X</button></td></tr>');document.getElementById("color_palette_table").appendChild(e),(0,l.default)(),(0,a.default)()})};var o=i(e("./htmlToElement")),l=i(e("./loadWpColorPicker")),a=i(e("./pluginAdminDeleteRow"));function i(e){return e&&e.__esModule?e:{default:e}}},{"./htmlToElement":2,"./loadWpColorPicker":4,"./pluginAdminDeleteRow":7}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=document.getElementsByClassName("button-row-delete");0<e.length&&Array.from(e).forEach(function(e){e.addEventListener("click",function(){e.parentNode.parentNode.remove()})})}},{}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){document.getElementById("add_new_font_size")&&document.getElementById("add_new_font_size").addEventListener("click",function(){var e="id_"+Math.floor(100*Math.random()),e=(0,o.default)("<tr id="+e+'><th scope="row"><input name="font_size_name" type="text" style="margin: 0 6px 0 0"/></th><td><input name="font_size_value" type="number" value=""/><button type="button" class="button button-primary button-row-delete" style="background: #dc3545; border: none;">X</button></td></tr>');document.getElementById("font_sizes_table").appendChild(e),(0,l.default)()})};var o=a(e("./htmlToElement")),l=a(e("./pluginAdminDeleteRow"));function a(e){return e&&e.__esModule?e:{default:e}}},{"./htmlToElement":2,"./pluginAdminDeleteRow":7}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var u=document.getElementById("save_options");u&&u.addEventListener("click",function(){var e,n,t,o,l,a,i;(0,d.default)("color_palette_name",/^[a-zA-Z() ]+$/)&&(0,d.default)("font_size_name",/^[a-zA-Z() ]+$/)?(e=document.querySelector('input[name="color_palette_enable"]').checked,l=document.querySelectorAll('tbody[id="color_palette_table"] tr[id*="id_"]'),n={},t=document.querySelector('input[name="font_sizes_enable"]').checked,i=document.querySelectorAll('tbody[id="font_sizes_table"] tr[id*="id_"]'),o={},u.classList.remove("--invalid-validation"),l.forEach(function(e,t){n[t]={colorName:e.querySelector('input[name="color_palette_name"]').value,colorValue:e.querySelector('input[name="color_palette_value"]').value}}),i.forEach(function(e,t){o[t]={fontName:e.querySelector('input[name="font_size_name"]').value,fontSize:e.querySelector('input[name="font_size_value"]').value}}),l={colorPalette:{colorPaletteOn:e,colorPaletteOptionsObject:n},fontSizes:{fontSizesOn:t,fontSizesOptionsObject:o}},a=document.getElementById("ajax_spinner"),(i=new URLSearchParams).append("action","blocksPlusSavePluginOptions"),i.append("securityCheck",blocksplus_ajax.nonce),0<Object.keys(l).length?i.append("dataToSave",JSON.stringify(l)):i.append("dataToSave",null),a.style.display="inline-block",fetch(blocksplus_ajax.url,{method:"POST",body:i}).then(function(e){console.log("Success:",e),a.style.display="none",403===e.status?(document.getElementById("save_options").classList.add("--forbidden"),setTimeout(function(){document.getElementById("save_options").classList.remove("--forbidden")},3e3)):(document.getElementById("save_options").classList.add("--settings-saved"),setTimeout(function(){document.getElementById("save_options").classList.remove("--settings-saved")},3e3))}).catch(function(e){console.error("Error:",e),a.style.display="none"})):(u.classList.add("--invalid-validation"),setTimeout(function(){u.classList.remove("--invalid-validation")},3e3))})};var d=(n=e("../admin/inputValidation"))&&n.__esModule?n:{default:n}},{"../admin/inputValidation":3}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=document.getElementById("blocksplus_notice");e&&e.addEventListener("click",function(){console.log(e),document.cookie="blocksplus_notice=closed; Path=/;"})}},{}]},{},[1]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhc3NldHMvc2NyaXB0cy9hZG1pbi5qcyIsImFzc2V0cy9zY3JpcHRzL2FkbWluL2h0bWxUb0VsZW1lbnQuanMiLCJhc3NldHMvc2NyaXB0cy9hZG1pbi9pbnB1dFZhbGlkYXRpb24uanMiLCJhc3NldHMvc2NyaXB0cy9hZG1pbi9sb2FkV3BDb2xvclBpY2tlci5qcyIsImFzc2V0cy9zY3JpcHRzL2FkbWluL29wdGlvbkFyZWFFbmFibGUuanMiLCJhc3NldHMvc2NyaXB0cy9hZG1pbi9wbHVnaW5BZG1pbkNvbG9yUGFsZXR0ZS5qcyIsImFzc2V0cy9zY3JpcHRzL2FkbWluL3BsdWdpbkFkbWluRGVsZXRlUm93LmpzIiwiYXNzZXRzL3NjcmlwdHMvYWRtaW4vcGx1Z2luQWRtaW5Gb250U2l6ZXMuanMiLCJhc3NldHMvc2NyaXB0cy9hZG1pbi9zYXZlUGx1Z2luT3B0aW9ucy5qcyIsImFzc2V0cy9zY3JpcHRzL2FkbWluL3NldE5vdGljZUNvb2tpZS5qcyJdLCJuYW1lcyI6WyJyIiwiZSIsIm4iLCJ0IiwibyIsImkiLCJmIiwiYyIsInJlcXVpcmUiLCJ1IiwiYSIsIkVycm9yIiwiY29kZSIsInAiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsIjEiLCJtb2R1bGUiLCJfbG9hZFdwQ29sb3JQaWNrZXIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX3BsdWdpbkFkbWluQ29sb3JQYWxldHRlIiwiX3BsdWdpbkFkbWluRm9udFNpemVzIiwiX3NhdmVQbHVnaW5PcHRpb25zIiwiX3BsdWdpbkFkbWluRGVsZXRlUm93IiwiX29wdGlvbkFyZWFFbmFibGUiLCJfc2V0Tm90aWNlQ29va2llIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjaGVja2JveEZvbnRTaXplcyIsImFyZWFGb250U2l6ZXMiLCJnZXRFbGVtZW50QnlJZCIsImNoZWNrYm94Q29sb3JQYWxldHRlIiwicXVlcnlTZWxlY3RvciIsImFyZWFDb2xvclBhbGV0dGUiLCJodG1sIiwidGVtcGxhdGUiLCJjcmVhdGVFbGVtZW50IiwidHJpbSIsImlubmVySFRNTCIsImNvbnRlbnQiLCJmaXJzdENoaWxkIiwiaW5wdXRFbGVtZW50VG9WYWxpZGF0ZSIsInZhbGlkYXRpb25QYXR0ZXJuIiwidmFsaWRhdGlvblN0YXRlIiwiaW5wdXRFbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwidGVzdCIsInZhbHVlIiwialF1ZXJ5IiwicmVhZHkiLCIkIiwid3BDb2xvclBpY2tlciIsImNoZWNrYm94IiwiYXJlYSIsImNoZWNrZWQiLCJzdHlsZSIsImRpc3BsYXkiLCJlbGVtZW50SWQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJkb21PYmplY3QiLCJfaHRtbFRvRWxlbWVudCIsImFwcGVuZENoaWxkIiwiZGVsZXRlQnV0dG9ucyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJBcnJheSIsImZyb20iLCJkZWxldGVCdXR0b24iLCJwYXJlbnROb2RlIiwicmVtb3ZlIiwic2F2ZUJ1dHRvbiIsImNvbG9yUGFsZXR0ZU9uIiwiY29sb3JQYWxldHRlT3B0aW9uc09iamVjdCIsImZvbnRTaXplc09uIiwiZm9udFNpemVzT3B0aW9uc09iamVjdCIsIm9iamVjdCIsInNwaW5uZXIiLCJkYXRhVG9TYXZlIiwiX2lucHV0VmFsaWRhdGlvbiIsImNvbG9yUGFsZXR0ZSIsImZvbnRTaXplcyIsImNsYXNzTGlzdCIsInBhbGV0dGVFbGVtZW50IiwiaW5kZXgiLCJjb2xvck5hbWUiLCJjb2xvclZhbHVlIiwiZm9udFNpemVFbGVtZW50IiwiZm9udE5hbWUiLCJmb250U2l6ZSIsIlVSTFNlYXJjaFBhcmFtcyIsImFwcGVuZCIsImJsb2Nrc3BsdXNfYWpheCIsIm5vbmNlIiwiT2JqZWN0Iiwia2V5cyIsIkpTT04iLCJzdHJpbmdpZnkiLCJmZXRjaCIsInVybCIsIm1ldGhvZCIsImJvZHkiLCJ0aGVuIiwiZGF0YSIsImNvbnNvbGUiLCJsb2ciLCJzdGF0dXMiLCJhZGQiLCJzZXRUaW1lb3V0IiwiZXJyb3IiLCJjbG9zZU5vdGljZUJ1dHRvbiIsImNvb2tpZSJdLCJtYXBwaW5ncyI6IkFBQUEsQ0FBQSxTQUFBQSxFQUFBQyxFQUFBQyxFQUFBQyxHQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBQUEsR0FBQSxDQUFBSixFQUFBRyxHQUFBLENBQUEsR0FBQSxDQUFBSixFQUFBSSxHQUFBLENBQUEsSUFBQUUsRUFBQSxZQUFBLE9BQUFDLFNBQUFBLFFBQUEsR0FBQSxDQUFBRixHQUFBQyxFQUFBLE9BQUFBLEVBQUFGLEVBQUEsQ0FBQSxDQUFBLEVBQUEsR0FBQUksRUFBQSxPQUFBQSxFQUFBSixFQUFBLENBQUEsQ0FBQSxFQUFBLE1BQUFLLEVBQUEsSUFBQUMsTUFBQSx1QkFBQU4sRUFBQSxHQUFBLEdBQUFPLEtBQUEsbUJBQUFGLENBQUEsQ0FBQUcsRUFBQVgsRUFBQUcsR0FBQSxDQUFBUyxRQUFBLEVBQUEsRUFBQWIsRUFBQUksR0FBQSxHQUFBVSxLQUFBRixFQUFBQyxRQUFBLFNBQUFkLEdBQUEsT0FBQUksRUFBQUgsRUFBQUksR0FBQSxHQUFBTCxJQUFBQSxDQUFBLENBQUEsRUFBQWEsRUFBQUEsRUFBQUMsUUFBQWQsRUFBQUMsRUFBQUMsRUFBQUMsQ0FBQSxDQUFBLENBQUEsT0FBQUQsRUFBQUcsR0FBQVMsT0FBQSxDQUFBLElBQUEsSUFBQUwsRUFBQSxZQUFBLE9BQUFELFNBQUFBLFFBQUFILEVBQUEsRUFBQUEsRUFBQUYsRUFBQWEsT0FBQVgsQ0FBQSxHQUFBRCxFQUFBRCxFQUFBRSxFQUFBLEVBQUEsT0FBQUQsQ0FBQSxFQUFBLENBQUFhLEVBQUEsQ0FBQSxTQUFBVCxFQUFBVSxFQUFBSixHLGFDQUEsSUFBQUssRUFBQUMsRUFBQVosRUFBQSwyQkFBQSxDQUFBLEVBQ0FhLEVBQUFELEVBQUFaLEVBQUEsaUNBQUEsQ0FBQSxFQUNBYyxFQUFBRixFQUFB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LFVBQVVaLE9BQU8sYUFBYSxDQUN4RSxFQUFHLEdBQUksSUFFUDlDLFNBQVNJLGVBQWUsY0FBYyxFQUFFc0QsVUFBVXlCLElBQUksa0JBQWtCLEVBRXhFQyxXQUFXLFdBQ1RwRixTQUFTSSxlQUFlLGNBQWMsRUFBRXNELFVBQVVaLE9BQU8sa0JBQWtCLENBQzdFLEVBQUcsR0FBSSxFQUVYLENBQUMsRUFBQyxNQUNLLFNBQUN1QyxHQUNOTCxRQUFRSyxNQUFNLFNBQVVBLENBQUssRUFDN0JoQyxFQUFRdEIsTUFBTUMsUUFBVSxNQUMxQixDQUFDLElBdkRHZSxFQUFXVyxVQUFVeUIsSUFBSSxzQkFBc0IsRUFFL0NDLFdBQVcsV0FDVHJDLEVBQVdXLFVBQVVaLE9BQU8sc0JBQXNCLENBQ3BELEVBQUcsR0FBSSxFQUVYLENBQUMsQ0FFTCxFQXhEQSxJQUFBUyxHQUF1RDFELEVBQXZEbkIsRUFBQSwwQkFBQSxJQUF1RG1CLEVBQUFDLFdBQUFELEVBQUEsQ0FBQUUsUUFBQUYsQ0FBQSxDLDhIQ0d4QyxXQUNiLElBQU15RixFQUFvQnRGLFNBQVNJLGVBQWUsbUJBQW1CLEVBRWpFa0YsR0FDRkEsRUFBa0JyRixpQkFBaUIsUUFBUyxXQUN4QytFLFFBQVFDLElBQUlLLENBQWlCLEVBQzdCdEYsU0FBU3VGLE9BQVMsbUNBQ3RCLENBQUMsQ0FFTCIsImZpbGUiOiJhZG1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgbG9hZFdwQ29sb3JQaWNrZXIgZnJvbSBcIi4vYWRtaW4vbG9hZFdwQ29sb3JQaWNrZXJcIjtcbmltcG9ydCBwbHVnaW5BZG1pbkNvbG9yUGFsZXR0ZSBmcm9tIFwiLi9hZG1pbi9wbHVnaW5BZG1pbkNvbG9yUGFsZXR0ZVwiO1xuaW1wb3J0IHBsdWdpbkFkbWluRm9udFNpemVzIGZyb20gXCIuL2FkbWluL3BsdWdpbkFkbWluRm9udFNpemVzXCI7XG5pbXBvcnQgc2F2ZVBsdWdpbk9wdGlvbnMgZnJvbSBcIi4vYWRtaW4vc2F2ZVBsdWdpbk9wdGlvbnNcIjtcbmltcG9ydCBwbHVnaW5BZG1pbkRlbGV0ZVJvdyBmcm9tIFwiLi9hZG1pbi9wbHVnaW5BZG1pbkRlbGV0ZVJvd1wiO1xuaW1wb3J0IG9wdGlvbkFyZWFFbmFibGUgZnJvbSBcIi4vYWRtaW4vb3B0aW9uQXJlYUVuYWJsZVwiO1xuaW1wb3J0IHNldE5vdGljZUNvb2tpZSBmcm9tIFwiLi9hZG1pbi9zZXROb3RpY2VDb29raWVcIjtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgc2V0Tm90aWNlQ29va2llKCk7XG5cbiAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdibG9ja3NwbHVzX2FkbWluJykpIHtcbiAgICBsb2FkV3BDb2xvclBpY2tlcigpO1xuICAgIHBsdWdpbkFkbWluQ29sb3JQYWxldHRlKCk7XG4gICAgcGx1Z2luQWRtaW5Gb250U2l6ZXMoKTtcbiAgICBzYXZlUGx1Z2luT3B0aW9ucygpO1xuICAgIHBsdWdpbkFkbWluRGVsZXRlUm93KCk7XG5cbiAgICBjb25zdCBjaGVja2JveENvbG9yUGFsZXR0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJjb2xvcl9wYWxldHRlX2VuYWJsZVwiXScpO1xuICAgIGNvbnN0IGFyZWFDb2xvclBhbGV0dGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3JfcGFsZXR0ZV9hcmVhJyk7XG4gICAgb3B0aW9uQXJlYUVuYWJsZShjaGVja2JveENvbG9yUGFsZXR0ZSwgYXJlYUNvbG9yUGFsZXR0ZSk7XG5cbiAgICBjb25zdCBjaGVja2JveEZvbnRTaXplcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJmb250X3NpemVzX2VuYWJsZVwiXScpO1xuICAgIGNvbnN0IGFyZWFGb250U2l6ZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9udF9zaXplc19hcmVhJyk7XG4gICAgb3B0aW9uQXJlYUVuYWJsZShjaGVja2JveEZvbnRTaXplcywgYXJlYUZvbnRTaXplcyk7XG4gIH1cbn0pO1xuIiwiLyoqXG4gKiBDcmVhdGluZyBuZXcgRE9NIGVsZW1lbnQgZnJvbSBhbiBIVE1MIHN0cmluZy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaHRtbFRvRWxlbWVudChodG1sKSB7XG4gIHZhciB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gIGh0bWwgPSBodG1sLnRyaW0oKTtcbiAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbDtcblxuICByZXR1cm4gdGVtcGxhdGUuY29udGVudC5maXJzdENoaWxkO1xufSIsIi8qKlxuICogVmFsaWRhdGUgc2VsZWN0ZWQgaW5wdXQgdmFsdWUgd2l0aCBwcm92aWRlZCBwYXR0ZXJuXG4gKiBcbiAqIEBwYXJhbSB7aW5wdXRFbGVtZW50VG9WYWxpZGF0ZX0gaW5wdXQgRE9NIGVsZW1lbnQgKHdob2xlIGVsZW1lbnQpIHRvIHZhbGlkYXRlIChxdWVyaWVkIGJ5IG5hbWUpXG4gKiBAcGFyYW0ge3ZhbGlkYXRpb25QYXR0ZXJufSBwYXR0ZXJuIHVzZWQgdG8gdmFsaWRhdGUgaW5wdXQgdmFsdWVcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5wdXRWYWxpZGF0aW9uKGlucHV0RWxlbWVudFRvVmFsaWRhdGUsIHZhbGlkYXRpb25QYXR0ZXJuKSB7XG4gIHZhciBpbnB1dEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW25hbWU9JyArIGlucHV0RWxlbWVudFRvVmFsaWRhdGUgKyAnXScpLFxuICAgIHZhbGlkYXRpb25TdGF0ZTtcblxuICBpZiAoaW5wdXRFbGVtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgaW5wdXRFbGVtZW50cy5mb3JFYWNoKGlucHV0RWxlbWVudCA9PiB7XG4gICAgICBpZiAoIXZhbGlkYXRpb25QYXR0ZXJuLnRlc3QoaW5wdXRFbGVtZW50LnZhbHVlKSkge1xuICAgICAgICB2YWxpZGF0aW9uU3RhdGUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICh2YWxpZGF0aW9uU3RhdGUgIT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn0iLCIvKipcbiAqIFwiQ29sb3IgcGlja2VyXCIgaW4gcGx1Z2luJ3MgYWRtaW4gcGFnZSBpbml0LlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBsb2FkV3BDb2xvclBpY2tlcigpIHtcbiAgalF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoJCkge1xuICAgICQoJy5ibG9ja3NwbHVzLWNvbG9yLXBhbGV0dGUnKS53cENvbG9yUGlja2VyKCk7XG4gIH0pO1xufSIsIi8qKlxuICogU2hvd2luZyBvciBoaWRpbmcgb3B0aW9uIGFyZWEgYmFzZWQgb24gY2hlY2tib3ggYXJlYSdzIHZhbHVlXG4gKiBcbiAqIEBwYXJhbSB7Y2hlY2tib3h9IGNoZWNrYm94IGlucHV0IERPTSBlbGVtZW50ICh3aG9sZSBlbGVtZW50KVxuICogQHBhcmFtIHthcmVhfSBhcmVhIERPTSB3aGljaCB3aWxsIGJlIHNob3duIG9yIGhpZGRlblxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBvcHRpb25BcmVhRW5hYmxlKGNoZWNrYm94LCBhcmVhKSB7XG4gIGlmIChjaGVja2JveCkge1xuICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChjaGVja2JveC5jaGVja2VkICE9PSB0cnVlKSB7XG4gICAgICAgIGFyZWEuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBhcmVhLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgcmV0dXJuO1xuICAgIH0pO1xuICB9XG59IiwiaW1wb3J0IGh0bWxUb0VsZW1lbnQgZnJvbSBcIi4vaHRtbFRvRWxlbWVudFwiO1xuaW1wb3J0IGxvYWRXcENvbG9yUGlja2VyIGZyb20gXCIuL2xvYWRXcENvbG9yUGlja2VyXCI7XG5pbXBvcnQgcGx1Z2luQWRtaW5EZWxldGVSb3cgZnJvbSBcIi4vcGx1Z2luQWRtaW5EZWxldGVSb3dcIjtcblxuLyoqXG4gKiBDcmVhdGluZyBuZXcgRE9NIGNvbG9yIHNlbGVjdG9yIG9mIFwiY29sb3IgcGlja2VyXCIgZm9yIHBsdWdpbidzIGNvbG9yIHBhbGV0dGUgZnVuY3Rpb25hbGl0eS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcGx1Z2luQWRtaW5Db2xvclBhbGV0dGUoKSB7XG4gIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkX25ld19jb2xvcl9wYWxldHRlJykpIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkX25ld19jb2xvcl9wYWxldHRlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiBhZGROZXdDb2xvclBpY2tlcigpIHtcbiAgICAgIHZhciBlbGVtZW50SWQgPSAnaWRfJyArIChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApKTtcblxuICAgICAgdmFyIGNvZGVCbG9jayA9XG4gICAgICAgICc8dHIgaWQ9JyArIGVsZW1lbnRJZCArICc+JyArXG4gICAgICAgICc8dGggc2NvcGU9XCJyb3dcIj4nICtcbiAgICAgICAgJzxpbnB1dCBuYW1lPVwiY29sb3JfcGFsZXR0ZV9uYW1lXCIgdHlwZT1cInRleHRcIiBzdHlsZT1cIm1hcmdpbjogMCA2cHggNnB4IDBcIi8+JyArXG4gICAgICAgICc8L3RoPicgK1xuICAgICAgICAnPHRkPicgK1xuICAgICAgICAnPGlucHV0IG5hbWU9XCJjb2xvcl9wYWxldHRlX3ZhbHVlXCIgdHlwZT1cInRleHRcIiB2YWx1ZT1cIiNmZmZcIiBjbGFzcz1cImJsb2Nrc3BsdXMtY29sb3ItcGFsZXR0ZVwiIGRhdGEtZGVmYXVsdC1jb2xvcj1cIiNmZmZcIiAvPicgK1xuICAgICAgICAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidXR0b24gYnV0dG9uLXByaW1hcnkgYnV0dG9uLXJvdy1kZWxldGVcIiBzdHlsZT1cImJhY2tncm91bmQ6ICNkYzM1NDU7IGJvcmRlcjogbm9uZTtcIj5YPC9idXR0b24+JyArXG4gICAgICAgICc8L3RkPicgK1xuICAgICAgICAnPC90cj4nO1xuXG4gICAgICB2YXIgZG9tT2JqZWN0ID0gaHRtbFRvRWxlbWVudChjb2RlQmxvY2spO1xuXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3JfcGFsZXR0ZV90YWJsZScpLmFwcGVuZENoaWxkKGRvbU9iamVjdCk7XG4gICAgICBsb2FkV3BDb2xvclBpY2tlcigpO1xuICAgICAgcGx1Z2luQWRtaW5EZWxldGVSb3coKTtcbiAgICB9KTtcbiAgfVxufSIsIi8qKlxuICogQXNzaWduIFwicm93IGRlbGV0ZVwiIGZ1bmN0aW9uYWxpdHkgdG8gcm93J3MgZGVsZXRlIGJ1dHRvblxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwbHVnaW5BZG1pbkRlbGV0ZVJvdygpIHtcbiAgdmFyIGRlbGV0ZUJ1dHRvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdidXR0b24tcm93LWRlbGV0ZScpO1xuXG4gIGlmIChkZWxldGVCdXR0b25zLmxlbmd0aCA+IDApIHtcbiAgICBBcnJheS5mcm9tKGRlbGV0ZUJ1dHRvbnMpLmZvckVhY2goZGVsZXRlQnV0dG9uID0+IHtcbiAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZGVsZXRlQnV0dG9uLnBhcmVudE5vZGUucGFyZW50Tm9kZS5yZW1vdmUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59IiwiaW1wb3J0IGh0bWxUb0VsZW1lbnQgZnJvbSBcIi4vaHRtbFRvRWxlbWVudFwiO1xuaW1wb3J0IHBsdWdpbkFkbWluRGVsZXRlUm93IGZyb20gXCIuL3BsdWdpbkFkbWluRGVsZXRlUm93XCI7XG5cbi8qKlxuICogQ3JlYXRpbmcgbmV3IERPTSBjb2xvciBzZWxlY3RvciBvZiBcImNvbG9yIHBpY2tlclwiIGZvciBwbHVnaW4ncyBjb2xvciBwYWxldHRlIGZ1bmN0aW9uYWxpdHkuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHBsdWdpbkFkbWluRm9udFNpemVzKCkge1xuICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZF9uZXdfZm9udF9zaXplJykpIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkX25ld19mb250X3NpemUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIGFkZE5ld0ZvbnRTaXplKCkge1xuICAgICAgdmFyIGVsZW1lbnRJZCA9ICdpZF8nICsgKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCkpO1xuXG4gICAgICB2YXIgY29kZUJsb2NrID1cbiAgICAgICAgJzx0ciBpZD0nICsgZWxlbWVudElkICsgJz4nICtcbiAgICAgICAgJzx0aCBzY29wZT1cInJvd1wiPicgK1xuICAgICAgICAnPGlucHV0IG5hbWU9XCJmb250X3NpemVfbmFtZVwiIHR5cGU9XCJ0ZXh0XCIgc3R5bGU9XCJtYXJnaW46IDAgNnB4IDAgMFwiLz4nICtcbiAgICAgICAgJzwvdGg+JyArXG4gICAgICAgICc8dGQ+JyArXG4gICAgICAgICc8aW5wdXQgbmFtZT1cImZvbnRfc2l6ZV92YWx1ZVwiIHR5cGU9XCJudW1iZXJcIiB2YWx1ZT1cIlwiLz4nICtcbiAgICAgICAgJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnV0dG9uIGJ1dHRvbi1wcmltYXJ5IGJ1dHRvbi1yb3ctZGVsZXRlXCIgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZGMzNTQ1OyBib3JkZXI6IG5vbmU7XCI+WDwvYnV0dG9uPicgK1xuICAgICAgICAnPC90ZD4nICtcbiAgICAgICAgJzwvdHI+JztcblxuICAgICAgdmFyIGRvbU9iamVjdCA9IGh0bWxUb0VsZW1lbnQoY29kZUJsb2NrKTtcblxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZvbnRfc2l6ZXNfdGFibGUnKS5hcHBlbmRDaGlsZChkb21PYmplY3QpO1xuICAgICAgcGx1Z2luQWRtaW5EZWxldGVSb3coKTtcbiAgICB9KTtcbiAgfVxufSIsImltcG9ydCBpbnB1dFZhbGlkYXRpb24gZnJvbSBcIi4uL2FkbWluL2lucHV0VmFsaWRhdGlvblwiO1xuXG4vKipcbiAqIE9uIFwiU2F2ZSBvcHRpb25zXCIgYnV0b24gY2xpY2sgc2F2ZSBkYXRhIGZyb20gaW5wdXRzIHRvIFdQIHRhYmxlIHZpYSBBSkFYIGNhbGxcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2F2ZVBsdWdpbk9wdGlvbnMoKSB7XG4gIGNvbnN0IHNhdmVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZV9vcHRpb25zJyk7XG5cbiAgaWYgKHNhdmVCdXR0b24pIHtcbiAgICBzYXZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGlucHV0VmFsaWRhdGlvbignY29sb3JfcGFsZXR0ZV9uYW1lJywgL15bYS16QS1aKCkgXSskLykgJiYgaW5wdXRWYWxpZGF0aW9uKCdmb250X3NpemVfbmFtZScsIC9eW2EtekEtWigpIF0rJC8pKSB7XG4gICAgICAgIHZhciBkYXRhVG9TYXZlID0ge30sXG4gICAgICAgICAgY29sb3JQYWxldHRlT24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwiY29sb3JfcGFsZXR0ZV9lbmFibGVcIl0nKS5jaGVja2VkLFxuICAgICAgICAgIGNvbG9yUGFsZXR0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3Rib2R5W2lkPVwiY29sb3JfcGFsZXR0ZV90YWJsZVwiXSB0cltpZCo9XCJpZF9cIl0nKSxcbiAgICAgICAgICBjb2xvclBhbGV0dGVPcHRpb25zT2JqZWN0ID0ge30sXG4gICAgICAgICAgZm9udFNpemVzT24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwiZm9udF9zaXplc19lbmFibGVcIl0nKS5jaGVja2VkLFxuICAgICAgICAgIGZvbnRTaXplcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3Rib2R5W2lkPVwiZm9udF9zaXplc190YWJsZVwiXSB0cltpZCo9XCJpZF9cIl0nKSxcbiAgICAgICAgICBmb250U2l6ZXNPcHRpb25zT2JqZWN0ID0ge307XG5cbiAgICAgICAgc2F2ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCctLWludmFsaWQtdmFsaWRhdGlvbicpO1xuXG4gICAgICAgIGNvbG9yUGFsZXR0ZS5mb3JFYWNoKChwYWxldHRlRWxlbWVudCwgaW5kZXgpID0+IHtcbiAgICAgICAgICBjb2xvclBhbGV0dGVPcHRpb25zT2JqZWN0W2luZGV4XSA9IHtcbiAgICAgICAgICAgIGNvbG9yTmFtZTogcGFsZXR0ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cImNvbG9yX3BhbGV0dGVfbmFtZVwiXScpLnZhbHVlLFxuICAgICAgICAgICAgY29sb3JWYWx1ZTogcGFsZXR0ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cImNvbG9yX3BhbGV0dGVfdmFsdWVcIl0nKS52YWx1ZVxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZvbnRTaXplcy5mb3JFYWNoKChmb250U2l6ZUVsZW1lbnQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgZm9udFNpemVzT3B0aW9uc09iamVjdFtpbmRleF0gPSB7XG4gICAgICAgICAgICBmb250TmFtZTogZm9udFNpemVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJmb250X3NpemVfbmFtZVwiXScpLnZhbHVlLFxuICAgICAgICAgICAgZm9udFNpemU6IGZvbnRTaXplRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwiZm9udF9zaXplX3ZhbHVlXCJdJykudmFsdWVcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICBkYXRhVG9TYXZlID0ge1xuICAgICAgICAgIGNvbG9yUGFsZXR0ZToge1xuICAgICAgICAgICAgY29sb3JQYWxldHRlT24sXG4gICAgICAgICAgICBjb2xvclBhbGV0dGVPcHRpb25zT2JqZWN0XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmb250U2l6ZXM6IHtcbiAgICAgICAgICAgIGZvbnRTaXplc09uLFxuICAgICAgICAgICAgZm9udFNpemVzT3B0aW9uc09iamVjdFxuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzYXZlUGx1Z2luT3B0aW9uc0FqYXgoZGF0YVRvU2F2ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzYXZlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJy0taW52YWxpZC12YWxpZGF0aW9uJyk7XG5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgc2F2ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCctLWludmFsaWQtdmFsaWRhdGlvbicpO1xuICAgICAgICB9LCAzMDAwKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIEFKQVggY2FsbCBmdW5jdGlvblxuICovXG5mdW5jdGlvbiBzYXZlUGx1Z2luT3B0aW9uc0FqYXgob2JqZWN0KSB7XG4gIHZhciBzcGlubmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FqYXhfc3Bpbm5lcicpO1xuICB2YXIgZGF0YVRvU2F2ZSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcblxuICBkYXRhVG9TYXZlLmFwcGVuZCgnYWN0aW9uJywgJ2Jsb2Nrc1BsdXNTYXZlUGx1Z2luT3B0aW9ucycpO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgZGF0YVRvU2F2ZS5hcHBlbmQoJ3NlY3VyaXR5Q2hlY2snLCBibG9ja3NwbHVzX2FqYXgubm9uY2UpO1xuXG4gIGlmIChPYmplY3Qua2V5cyhvYmplY3QpLmxlbmd0aCA+IDApIHtcbiAgICBkYXRhVG9TYXZlLmFwcGVuZCgnZGF0YVRvU2F2ZScsIEpTT04uc3RyaW5naWZ5KG9iamVjdCkpO1xuICB9IGVsc2Uge1xuICAgIGRhdGFUb1NhdmUuYXBwZW5kKCdkYXRhVG9TYXZlJywgbnVsbCk7XG4gIH1cblxuICBzcGlubmVyLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgZmV0Y2goYmxvY2tzcGx1c19hamF4LnVybCwge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGJvZHk6IGRhdGFUb1NhdmVcbiAgfSlcbiAgICAudGhlbihkYXRhID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdTdWNjZXNzOicsIGRhdGEpO1xuICAgICAgc3Bpbm5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICBpZiAoZGF0YS5zdGF0dXMgPT09IDQwMykge1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZV9vcHRpb25zJykuY2xhc3NMaXN0LmFkZCgnLS1mb3JiaWRkZW4nKTtcblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZV9vcHRpb25zJykuY2xhc3NMaXN0LnJlbW92ZSgnLS1mb3JiaWRkZW4nKTtcbiAgICAgICAgfSwgMzAwMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZV9vcHRpb25zJykuY2xhc3NMaXN0LmFkZCgnLS1zZXR0aW5ncy1zYXZlZCcpO1xuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYXZlX29wdGlvbnMnKS5jbGFzc0xpc3QucmVtb3ZlKCctLXNldHRpbmdzLXNhdmVkJyk7XG4gICAgICAgIH0sIDMwMDApO1xuICAgICAgfVxuICAgIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyb3IpO1xuICAgICAgc3Bpbm5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH0pO1xufSIsIi8qKlxuICogU2V0IE5vdGljZSBDb29raWUgb24gbm90aWNlIHBhbmVsIGRpc21pc3NhbFxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzZXROb3RpY2VDb29raWUoKSB7XG4gIGNvbnN0IGNsb3NlTm90aWNlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jsb2Nrc3BsdXNfbm90aWNlJyk7XG5cbiAgaWYgKGNsb3NlTm90aWNlQnV0dG9uKSB7XG4gICAgY2xvc2VOb3RpY2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGNsb3NlTm90aWNlQnV0dG9uKTtcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gJ2Jsb2Nrc3BsdXNfbm90aWNlPWNsb3NlZDsgUGF0aD0vOyc7XG4gICAgfSk7XG4gIH1cbn0iXX0=
